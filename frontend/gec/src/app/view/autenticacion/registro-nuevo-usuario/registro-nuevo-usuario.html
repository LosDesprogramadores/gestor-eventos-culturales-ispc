<app-header></app-header>
<app-nav-home></app-nav-home> 

<main class="registro-main">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6">

        <div class="registro-card">

          <!-- üü¢ Mensaje de √©xito -->
          @if (registroExitoso) {
            <div class="alert alert-success text-center fade show mt-2 mb-3" role="alert">
              ‚úÖ ¬°Tu cuenta ha sido creada correctamente!
              <br>
              <small>Puedes iniciar sesi√≥n con tus credenciales.</small>
            </div>
          }

          <!-- üî¥ Mensaje de error -->
          @if (mensajeError) {
            <div class="alert alert-danger text-center fade show mt-2 mb-3" role="alert">
              ‚ö†Ô∏è {{ mensajeError }}
            </div>
          }

          <!-- FORMULARIO -->
          <form [formGroup]="form" (ngSubmit)="onSubmit()" class="registro-formulario needs-validation" novalidate>
            
            <h1 class="registro-titulo">Crear nueva cuenta</h1>

            <!-- EMAIL -->
            <div class="mb-3">
              <input type="email"
                     formControlName="email"
                     class="registro-input form-control"
                     placeholder="Correo electr√≥nico" />
              @if (email?.errors && email?.touched) {
                @if (email?.hasError('required')) {
                  <p class="text-danger registro-feedback">El email es obligatorio.</p>
                }
                @else if (email?.hasError('email')) {
                  <p class="text-danger registro-feedback">Formato de email inv√°lido.</p>
                }
              }
            </div>

            <!-- CONTRASE√ëA -->
            <div class="mb-3">
              <input type="password"
                     formControlName="password"
                     class="registro-input form-control"
                     placeholder="Contrase√±a" minlength="8" />
              @if(password?.errors && password?.touched) {
                @if(password?.hasError('required')) {
                  <p class="text-danger registro-feedback">La contrase√±a es requerida.</p>
                }
                @else if (password?.hasError('minlength')) {
                  <p class="text-danger registro-feedback">Debe tener al menos 8 caracteres.</p>
                }
              }
            </div>

            <!-- CONFIRMAR CONTRASE√ëA -->
            <div class="mb-3">
              <input type="password"
                     formControlName="confirmPassword"
                     class="registro-input form-control"
                     placeholder="Repetir contrase√±a" />
              @if(confirmPassword?.errors && confirmPassword?.touched) {
                @if(confirmPassword?.hasError('required')) {
                  <p class="text-danger registro-feedback">Repetir la contrase√±a es requerido.</p>
                }
                @else if(confirmPassword?.hasError('passwordMismatch')) {
                  <p class="text-danger registro-feedback">Las contrase√±as no coinciden.</p>
                }
              }
            </div>

            <!-- BOTONES -->
            <div class="registro-botones d-flex flex-column flex-sm-row justify-content-between mt-3">
              <button type="submit" class="registro-btn btn w-100 w-sm-auto mb-2 mb-sm-0">Registrar</button>
              <button type="button"
                      class="registro-btn btn w-100 w-sm-auto"
                      [routerLink]="['/inicio-sesion']">
                Iniciar sesi√≥n
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>
